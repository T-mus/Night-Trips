"use strict";import{dynamicAdaptive}from"./Modules/adaptive.js";window.addEventListener("DOMContentLoaded",(()=>{}));let header=document.querySelector(".header"),headerHeight=header.offsetHeight,searchBody=document.querySelector(".header__search"),searchInput=searchBody.querySelector("input"),searchBodyClone=document.querySelector(".header__search-clone"),searchInputClone=searchBodyClone.querySelector("input"),searchIcon=document.querySelector(".js-icon-search"),searchIconClone=document.querySelector(".js-icon-search_clone"),screenWidth=window.innerWidth;function clickOutside(e){document.addEventListener("click",(t=>{let s=t.target,r=null;"search"===e?(r=searchBody.contains(s),!r&&searchIcon.classList.contains("_active")&&(document.body.classList.remove("_stop-scroll"),searchInput.style.cssText="max-width: null;",searchBody.style.cssText="border: none",searchIcon.classList.remove("_active"))):"search-clone"===e&&(r=searchIconClone.contains(s)||searchBodyClone.contains(s),!r&&searchIconClone.classList.contains("_active")&&(searchBodyClone.classList.remove("_show"),searchIconClone.classList.remove("_active")))}))}let currentScrollPos=window.pageYOffset,prevScrollPos=currentScrollPos,isVisible=!0;function toFixAndHideHeader(){currentScrollPos=window.pageYOffset,currentScrollPos<=headerHeight&&(header.style.transform="translateY(0)",isVisible=!0),currentScrollPos>prevScrollPos&&currentScrollPos>headerHeight&&isVisible?(header.style.transform="translateY(-100%)",isVisible=!1):(prevScrollPos>currentScrollPos||currentScrollPos<=headerHeight)&&!isVisible&&(header.style.transform="translateY(0)",isVisible=!0),currentScrollPos>headerHeight?header.classList.add("_fixed"):header.classList.remove("_fixed"),prevScrollPos=currentScrollPos}window.addEventListener("scroll",toFixAndHideHeader),searchIcon.addEventListener("click",(e=>{searchInput.style.maxWidth?(searchInput.style.cssText="max-width: null;",searchBody.style.cssText="border: none",searchIcon.classList.remove("_active")):(searchInput.style.cssText="max-width: 250px;",searchBody.style.cssText="border: 1px solid #fff;",searchIcon.classList.add("_active"),searchInput.value="",clickOutside("search"))})),searchIconClone.addEventListener("click",(e=>{searchBodyClone.classList.contains("_show")?(searchBodyClone.classList.remove("_show"),searchIconClone.classList.remove("_active")):(searchBodyClone.classList.add("_show"),searchIconClone.classList.add("_active"),searchInputClone.value="",clickOutside("search-clone"))}));let allSliders=document.querySelectorAll(".tabs__slider");allSliders.forEach((e=>{let t=e.getAttribute("id");new Swiper(`#${t} .slider__container`,{slidesPerView:1,watchOverflow:!0,speed:600,loop:!0,preloadImages:!0,navigation:{prevEl:`#${t} .slider__arrow_left`,nextEl:`#${t} .slider__arrow_right`},on:{}})}));let tabs=document.querySelector(".trips__tabs"),startTab=tabs.querySelector('[href="#chill-adventure"]'),tabsLinks=tabs.querySelectorAll(".tabs__link"),tabsPages=tabs.querySelectorAll(".tabs__page"),startPage=tabs.querySelector("#chill-adventure"),tabsBar=tabs.querySelector(".tabs__bar"),thumb=tabs.querySelector(".tabs__thumb"),tabWidth=null,tabPosX=null,barPosX=null;function switchTab(e,t){e.classList.add("_active"),t.classList.add("_show"),barPosX=tabsBar.offsetLeft,tabPosX=e.offsetLeft,tabWidth=e.offsetWidth,thumb.style.cssText=`\n        width: ${tabWidth}px;\n        transform: translate(${tabPosX-barPosX}px, 0);\n    `,t.classList.contains("_show")&&(t.querySelector(".slider__container").classList.add("_anim"),t.querySelector(".slider__arrows").classList.add("_anim"),t.querySelectorAll(".slider__arrow").forEach((e=>{e.classList.add("_anim")})),t.querySelector(".tabs__title").classList.add("_anim"),t.querySelector(".tabs__subtitle").classList.add("_anim"),t.querySelector(".tabs__text").classList.add("_anim"),t.querySelector(".tabs__button").classList.add("_anim"))}tabs.addEventListener("click",(e=>{if(e.preventDefault(),e.target.closest(".trips__tabs")){let t=e.target;if(t.classList.contains("tabs__link")){let e=document.querySelector(`${t.getAttribute("href")}`);tabsLinks.forEach((e=>{e.classList.remove("_active")})),tabsPages.forEach((e=>{e.classList.remove("_show"),e.querySelector(".slider__container").classList.remove("_anim"),e.querySelector(".slider__arrows").classList.remove("_anim"),e.querySelectorAll(".slider__arrow").forEach((e=>{e.classList.remove("_anim")})),e.querySelector(".tabs__title").classList.remove("_anim"),e.querySelector(".tabs__subtitle").classList.remove("_anim"),e.querySelector(".tabs__text").classList.remove("_anim"),e.querySelector(".tabs__button").classList.remove("_anim")})),switchTab(t,e)}}})),switchTab(startTab,startPage),function(){let e=document.querySelector(".footer__body"),t=e.querySelectorAll(".f-toggle-list__label"),s=e.querySelectorAll(".f-toggle-list__nav");e.addEventListener("click",(e=>{if(e.target.closest(".js-footer-item")){let r=e.target.closest(".js-footer-item");if(r.querySelector(".f-toggle-list__label")){let e=r.querySelector(".f-toggle-list__label"),o=r.querySelector(".f-toggle-list__nav");r.classList.contains("_open")?(e.classList.remove("_active"),o.style.maxHeight=0,r.classList.remove("_open")):(t.forEach((e=>{e.classList.remove("_active")})),s.forEach((e=>{e.style.maxHeight=0})),r.classList.add("_open"),e.classList.add("_active"),o.style.maxHeight=`${o.scrollHeight}px`)}}}))}();let intro=document.querySelector(".intro"),introHeight=intro.offsetHeight,isScrolling=!1;window.addEventListener("wheel",(e=>{e.deltaY>0&&window.scrollY<introHeight&&!isScrolling?(isScrolling=!0,window.scrollTo({top:introHeight,behavior:"smooth"})):e.deltaY<0&&window.scrollY>0&&window.scrollY<introHeight&&!isScrolling&&(isScrolling=!0,window.scrollTo({top:0,behavior:"smooth"})),isScrolling=!1}));let startY,endY,allowScroll=!1;function getDirection(e){window.addEventListener("touchmove",(t=>{0==allowScroll&&t.preventDefault(),endY=t.touches[0].clientY,scrollPage(e-endY>0?"up":"down")}),{passive:allowScroll})}function scrollPage(e){window.addEventListener("touchend",(t=>{"up"===e&&window.scrollY<introHeight?window.scrollTo({top:introHeight,behavior:"smooth"}):"down"===e&&window.scrollY>=0&&window.scrollY<introHeight&&window.scrollTo({top:0,behavior:"smooth"}),allowScroll=!0}))}window.addEventListener("touchstart",(e=>{startY=e.touches[0].clientY,getDirection(startY),allowScroll=!(window.scrollY<introHeight)}));